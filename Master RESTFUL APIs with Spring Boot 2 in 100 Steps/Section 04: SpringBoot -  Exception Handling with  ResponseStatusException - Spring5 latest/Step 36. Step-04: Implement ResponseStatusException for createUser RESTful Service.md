### Step 36. Step-04: Implement ResponseStatusException for createUser RESTful Service.md
Welcome back. In this step, we are going to implement this status exception for create user service. So let's see what our steps involve for doing it. OK, so let me go back to my steps, OK? So here are the steps, so implement response, status exception for our great user, so to do so, what we're going to do first is like we are going to create an exception, which means exception plus. So, again, we are planning to implement this like a standard implementation like production model where we can say that we will have the service layer where we can through the exception and we'll catch it on the controller layer and prove that response or description from controller layer. So for that purpose, we are going to again create one more custom exception clause, which is nothing but use that exists exception. So the service, we're going to update the creators and matter with the exception, and we're going to verify if user exists based on user name. This is the important thing here, right? Because for the user level, as the idea is going to be auto generated. Right. So we will not have any information. So we need to verify it based on user name as user name is a unique constraint. We should be good with that. OK, so we can say user target user name and then if the user is not equal to now, throw the exception that whatever the response came. So if it is not like whatever the response came from, this check is null, which means that user is not fun, then see that user. So that's we are going to implement OK. So if not null then true the exception. That's what we are going to implement. OK, so if our primary is instead of our pegylated idea, if it is user name, then the implementation is going to be a little different again. So it's a case to case basis, right. So here we have implemented in this model. OK, so it's not a standard R, right? It is only the beginning to implement it, not the case. OK, everyone will have their own style of logic and like to implement in this way now then going to control and will update the creators of method with the try catch block and in a catch block we will catch the exception that this exception when this is thrown and then implement the response to exception and then test the same using other Posman. So this is what we're going to implement using our response status exception for the user. So let's go back to it, you know. Right. So. What is the thing, so we make it so let me go to my exceptions package and then say no class, right and no exceptions package. So I'll see you. There exists exception, I can say, that already exists. Exception, whatever the name we feel is relevant here. Right. So and in this. So what we will do is. Bill extends to. Exception, it's the same as the last one, OK, so I'll send it generators, you will watching. You are OK and then I'll created constructor for this, right? So from source construction using superclass and the deselect all and then selectively string one by because currently we're handling only with the string. So this is created so. Let me say it right? Yeah, but so the exception to that respect to class user service. And let me make it bigger, right? Yeah. So what it was that our clearly other method is very simple here, which means whenever they use a body cell, then I'll just say that use are currently extended with another three to four lines of additional logic. So one is we are going to check if user exists, right, using username which is sent in the user body. OK, and. If not exists, this through exception named. Use this exception. Right. User. This exception, so to do so. First, I need to extend my this one, OK, so it's estrus user exists. Exception and then improved that class here, OK? And first thing is, if you that exists using username, right? So first one we need to do is we need to check that user is present, but not using user. Existing user. As a to. User repository. Not fine, but you said you have a method named find the username, right, and for this, we don't have any input parameterize user name, but we have something called we have the complete user objects. And so what I will say is you said that that username, so that I can get the exact username sent from the request and then using that, we will implement this. OK, so now what we will do is. Right. So if. Existing use of. Not equal to. Right. So which means some that is present inside. So then I'm going to throw the exception to the new user existing exception with their message, suggesting that whatever we define, we never use that exact exception constructor. So I'll see. User. Already exists in the repository, so I'll say this, OK, that's all. Right. Let me. So what's happening now? So we have implemented three things here. One is we have other method procedures like this exception when OK, when we don't leave, when we find that user in the repository saying that already exists in the repository. So find out whether that user exists in the repository or not because of the user repository, that findable username. And as we don't have any input parameters here. Right. So using the user context. Right. You are not getting the name. We have provided it so that if the user exists based on that, we have implemented this logic. OK, so now this completes the service layer implementation. So we'll go to the controller layer controller had already started complaining for us. OK, so let's go to the quote users area here and then we will implement the toilet block here. OK, so what I'll do is. Hmm. So I see control here, control shift format, OK? Right, and no, implement that catch block and catch block. I need to catch the exception yuzu exists. Exception, each lt was like this exception and. Let's throw the response to exception description from here, right, so I'll see through new. Response status. Exception. And I'll say ETP. Stuart, I start by the quest and you start get a message from the service layer. So let me go up. Yeah, here is the thing, right? Yeah. So let me say it. OK, so what we're doing here is if you use that exists, then the exceptional catch and throw the exception with this one status exception, if you did not exist, you just have to start create yourself, OK? So let's go to our postman and student. OK, so here is the you, sir. OK, so this time user might not be there. They're OK. So let me create it. OK, let me send it and then. It got created. All right, so get used by the if I say one will find that user wrote. See, we find we are finding that users are now, again, one more time for the same user. I'll try to send it. OK, so and then you should try an exception for us, OK? I have sent it. OK, so you can see it here. Timestamp and status 400 by request user already exists in a repository. So we have handled successfully this user already exists exception. So that's about the create user exception handling using response status exception. OK, user already exist exception. So let me go back to the steps and let me reiterate what we have done here. OK, so first you have to use this exception clause in the exception package and then in the service layer for the community as a method. We have extended it to say through the exception and in that we have verified of user existence. If user exists, then through the exception, namely user this exception and in the country that we implemented try catch block there. If the catch block, whenever this user like this exception is thrown, it will catch that and then throw that response status exception with this to the status quo. And then the speckling message. So we went to pressmen and then posted the same and we got the expected exception, response and then GTP status code. So this completes the step about implementing response to this call for it cleared user. 
